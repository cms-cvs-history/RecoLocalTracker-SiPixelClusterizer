# OBSOLETE does not work anymore. has to be updated! 2/08 d.k. 

# Make clusters without storing them and analyze on the fly.
process PROD = {
    source = PoolSource { 
       untracked vstring fileNames = {'file:pgun_simhits_digis.root'}
       untracked int32 maxEvents = -1
       untracked uint32 debugVebosity = 10
       untracked bool   debugFlag     = true
   }

   es_source magfield = XMLIdealGeometryESSource {
      FileInPath GeometryConfiguration = "Geometry/CMSCommonData/data/FieldConfiguration.xml"
      #the proper root node is set in the xml file
      string rootNodeName=""
   }
   es_module = VolumeBasedMagneticFieldESProducer {
      double findVolumeTolerance = 0.0
      untracked bool cacheLastVolume = true
      untracked bool timerOn = false
   }
   es_source = XMLIdealGeometryESSource {
      FileInPath GeometryConfiguration = "Geometry/CMSCommonData/data/SimConfiguration.xml"
      string rootNodeName = ""
   }
   es_module = TrackerGeometricDetESModule {}
   es_module = TrackerDigiGeometryESModule {}



# Run the clusterizer (parameters default)
	module siPixelClusters =  SiPixelClusterProducer {
#          untracked string DigiProducer = "pixdigi"	
#	   untracked string ClusterMode  = "PixelThresholdClusterizer"
#	   untracked int ChannelThreshold = 2500
#          untracked int SeedThreshold    = 3000
#          untracked double ClusterThreshold = 5050
#          untracked bool   DetailedTiming   = false
	   untracked int32 VerbosityLevel = 0		 
	}




# Analyze the clusters
        module analysis = ReadPixClusters {
           InputTag src = siPixelClusters
           int32  VerboseLevel       = 1
        }


# Do NOT store the results
#       module out = PoolOutputModule {
#               untracked string fileName = 'pixClusters.root'
#        }
#	path p = {siPixelClusters,out}

	path p = {siPixelClusters,analysis}
}
